pipeline {
    agent any

    stages {
        // stage('Build') {
        //     steps {
        //         echo 'Building the application ...'
        //     }
        // }
        // stage('Test') {
        //     steps {
        //         echo 'Testing the application'
        //     }
        // }
        // stage('Deploy') {
        //     steps {
        //         echo 'Deploying the application'
        //     }
        // }
        // stage('Jenkins Python code')
        // {
        //     steps {
        //         bat 'python ops.py'

        //     }
        // }
        // stage('Build'){
        //     steps{
        //         bat 'python -m py_compile ops.py'
        //     }
        // }
        stage('python test'){
            steps{
                // bat 'python -m pytest'
                // bat 'python unit-test.py'
                 bat 'python -m unittest test_ops.py'
            }
        }
        // stage('Report'){
        //     steps{
        //           bat 'python -m pytest --verbose --junit-xml reports/unit_tests.xml'
        //     }
        //     post{
        //         always{
        //             junit allowEmptyResults: true, testResults: 'reports/unit_tests.xml'
        //         }
        //     }
        // }
        
    }
    post{
        always{
            echo "Hi Gaurav, Email from pipeline"
        }
        success{

            echo "pipeline execution passed "

            mail to : "gauravdeshmukh7083@gmail.com",

            subject : "Pipeline Completed",

            body : "Pipeline Completetd "

        }

        failure{

            echo "pipeline execution failed"

            mail to : "gauravdeshmukh7083@gmail.com",

            subject : "Pipeline Failed",

            body : "Pipeline Failed"

        }
    }
}
